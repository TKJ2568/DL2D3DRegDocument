## 投影模块
投影模式有"circular_perspective", "matrix_perspective", "orthogonal"三种，分别指的是锥形束投影，锥形束矩阵投影，平行投影。在*1024*分辨率下出图推荐使用锥形束投影，在*1024*分辨率以上推荐使用锥形束矩阵投影。实验数据建议使用*128×128*分辨率的图像。

?> **请注意：**在锥形束投影中，假设像平面是紧贴CT体素的；但是在平行束投影中，像平面由`d_s2p`参数决定。这部分看不懂也没关系，源代码有解释，但是不需要管，使用默认设置基本上就可以了。

### 单次投影
在`config/data_loader_config.toml`中设置`single_projection`为1即可。

### DRR GUI（可选）
这是一个单独的模块，主要用于可视化投影过程，方便初学者理解。

#### 界面展示
<div style="text-align: center;">  <img src="asset\数据加载\DRRGUI.png" alt="DRR可视化界面" width=1000"></div>

1. 需要先导入体素。
2. `d_s2p`和`im_sz`的在文本框中的修改需要按下回车键才能有效。
   
!> 不建议将图像分辨率调到512*512以上，投影看起来不会有实际上的变化，但是出图很慢，可能导致闪退。


#### 加噪范围说明
##### 标准正位下
1. **初始位姿**：[0 270 90]或者[0 90 270]
2. **角度噪声范围**：此时主光轴是CT体素的Y轴，绕Y轴的旋转为±10。绕其他轴的旋转为±5
3. **位移噪声**：沿主光轴Y轴的位移是±50，沿其他方向的位移是±25

##### 标准侧位下
1. **初始位姿**:[0 270 0]或者[0 90 180]
2. **角度噪声范围**：此时主光轴是CT体素的X轴，绕X轴的旋转为±10。绕其他轴的旋转为±5
3. **位移噪声**：沿主光轴X轴的位移是±50，沿其他方向的位移是±25

#### 可修改的设置
1. **刷新率：**在`DataLoader/DRRGUI/config/drr_ui_config.toml`文件中，可以修改`refresh_rate`，刷新率=重投影的响应时间，一般来说，越短越快，但是这取决于实际单张图片的投影时间。刷新率本质上指修改投影位姿参数后，多久响应一次。
2. **体素文件的默认导入路径：**在点击导入体素时，弹出一个默认的导入路径，具体的默认导入路径是可以在`DataLoader/DRRGUI/custom_ui_control/voxel_load_ui.py`中的`on_folder_select`函数下修改的。
3. **初始投影参数：**可以在`DataLoader/DRRGUI/config/default_drr_para.toml`中修改。